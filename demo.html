<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Strudel ä¸­æ–‡æ•™å­¸ - ç”¨ç¨‹å¼ç¢¼å¯«éŸ³æ¨‚</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }
      
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }
      
      header {
        text-align: center;
        color: white;
        margin-bottom: 40px;
      }
      
      h1 {
        font-size: 3em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      }
      
      .subtitle {
        font-size: 1.2em;
        opacity: 0.9;
      }
      
      .section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      }
      
      .section h2 {
        color: #5a67d8;
        margin-bottom: 20px;
        border-bottom: 3px solid #e2e8f0;
        padding-bottom: 10px;
      }
      
      .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }
      
      .tab {
        padding: 10px 20px;
        background: #e2e8f0;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
      }
      
      .tab.active {
        background: #5a67d8;
        color: white;
      }
      
      .tab-content {
        display: none;
      }
      
      .tab-content.active {
        display: block;
      }
      
      .example-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }
      
      .example-card {
        background: #f7fafc;
        border-radius: 10px;
        padding: 20px;
        border-left: 4px solid #5a67d8;
      }
      
      .example-card h4 {
        color: #2d3748;
        margin-bottom: 10px;
      }
      
      .code-block {
        background: #2d3748;
        color: #e2e8f0;
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
        font-family: 'Courier New', monospace;
        overflow-x: auto;
      }
      
      .controls {
        display: flex;
        gap: 10px;
        margin: 20px 0;
        justify-content: center;
      }
      
      .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.3s;
      }
      
      .btn-primary {
        background: #5a67d8;
        color: white;
      }
      
      .btn-primary:hover {
        background: #4c51bf;
        transform: translateY(-2px);
      }
      
      .btn-secondary {
        background: #e2e8f0;
        color: #2d3748;
      }
      
      .btn-secondary:hover {
        background: #cbd5e0;
      }
      
      .editor-area {
        background: #2d3748;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
      }
      
      #custom-editor {
        width: 100%;
        height: 200px;
        background: #1a202c;
        color: #e2e8f0;
        border: none;
        border-radius: 8px;
        padding: 15px;
        font-family: 'Courier New', monospace;
        font-size: 14px;
        resize: vertical;
      }
      
      .sound-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }
      
      .sound-card {
        background: #f7fafc;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        border: 2px solid transparent;
        transition: all 0.3s;
      }
      
      .sound-card:hover {
        border-color: #5a67d8;
        transform: translateY(-2px);
      }
      
      .iframe-container {
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin: 20px 0;
        text-align: center;
      }
      
      .iframe-container iframe {
        border-radius: 10px;
        border: 2px solid #e2e8f0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ğŸµ Strudel ä¸­æ–‡æ•™å­¸</h1>
        <p class="subtitle">ç”¨ç¨‹å¼ç¢¼å¯«éŸ³æ¨‚ï¼Œæ¢ç´¢ Live Coding çš„é­…åŠ›</p>
      </header>

      <!-- åŸå§‹ä½œå“å±•ç¤º -->
      <div class="iframe-container">
        <h3>ğŸŒŠ ç¶“å…¸ä½œå“ï¼šCoastline by eddyflux</h3>
        <p>é€™æ˜¯ä¸€å€‹ç¶“å…¸çš„ Strudel ä½œå“ï¼Œå±•ç¾äº† live coding éŸ³æ¨‚çš„é­…åŠ›</p>
        <iframe src="https://strudel.cc/#Ly8gImNvYXN0bGluZSIgQGJ5IGVkZHlmbHV4Ci8vIEB2ZXJzaW9uIDEuMApzYW1wbGVzKCdnaXRodWI6ZWRkeWZsdXgvY3JhdGUnKQpzZXRjcHMoLjc1KQpsZXQgY2hvcmRzID0gY2hvcmQoIjxCYm05IEZtOT4vNCIpLmRpY3QoJ2lyZWFsJykKc3RhY2soCiAgc3RhY2soIC8vIERSVU1TCiAgICBzKCJiZCIpLnN0cnVjdCgiPFt4KjwxIDI%2BIFt%2BQDMgeF1dIHg%2BIiksCiAgICBzKCJ%2BIFtyaW0sIHNkOjwyIDM%2BXSIpLnJvb20oIjwwIC4yPiIpLAogICAgbigiWzAgPDEgMz5dKjwyITMgND4iKS5zKCJoaCIpLAogICAgcygicmQ6PDEhMyAyPioyIikubWFzaygiPDAgMCAxIDE%2BLzE2IikuZ2FpbiguNSkKICApLmJhbmsoJ2NyYXRlJykKICAubWFzaygiPFswIDFdIDEgMSAxPi8xNiIuZWFybHkoLjUpKQogICwgLy8gQ0hPUkRTCiAgY2hvcmRzLm9mZnNldCgtMSkudm9pY2luZygpLnMoImdtX2VwaWFubzE6MSIpCiAgLnBoYXNlcig0KS5yb29tKC41KQogICwgLy8gTUVMT0RZCiAgbigiPDAhMyAxKjI%2BIikuc2V0KGNob3JkcykubW9kZSgicm9vdDpnMiIpCiAgLnZvaWNpbmcoKS5zKCJnbV9hY291c3RpY19iYXNzIiksCiAgY2hvcmRzLm4oIlswIDw0IDMgPDIgNT4%2BKjJdKDwzIDU%2BLDgpIikKICAuYW5jaG9yKCJENSIpLnZvaWNpbmcoKQogIC5zZWdtZW50KDQpLmNsaXAocmFuZC5yYW5nZSguNCwuOCkpCiAgLnJvb20oLjc1KS5zaGFwZSguMykuZGVsYXkoLjI1KQogIC5mbShzaW5lLnJhbmdlKDMsOCkuc2xvdyg4KSkKICAubHBmKHNpbmUucmFuZ2UoNTAwLDEwMDApLnNsb3coOCkpLmxwcSg1KQogIC5yYXJlbHkocGx5KCIyIikpLmNodW5rKDQsIGZhc3QoMikpCiAgLmdhaW4ocGVybGluLnJhbmdlKC42LCAuOSkpCiAgLm1hc2soIjwwIDEgMSAwPi8xNiIpCikKLmxhdGUoIlswIC4wMV0qNCIpLmxhdGUoIlswIC4wMV0qMiIpLnNpemUoNCk%3D" width="100%" height="400"></iframe>
      </div>

      <!-- æ•™å­¸å€å¡Š -->
      <div class="section">
        <h2>ğŸ“š Strudel æ•™å­¸</h2>
        <div class="tabs">
          <button class="tab active" onclick="switchTab('basics')">åŸºç¤èªæ³•</button>
          <button class="tab" onclick="switchTab('sounds')">éŸ³è‰²ä»‹ç´¹</button>
          <button class="tab" onclick="switchTab('patterns')">Pattern æŠ€å·§</button>
          <button class="tab" onclick="switchTab('effects')">æ•ˆæœå™¨</button>
        </div>

        <div id="basics" class="tab-content active">
          <h3>ğŸ¯ åŸºç¤èªæ³•</h3>
          <div class="example-grid">
            <div class="example-card">
              <h4>æ’­æ”¾é¼“è²</h4>
              <div class="code-block">s("bd sd hh cp")</div>
              <p>bd=å¤§é¼“, sd=å°é¼“, hh=è¸©éˆ¸, cp=æ‹æ‰‹</p>
              <button class="btn btn-primary" onclick="playExample('s(&quot;bd sd hh cp&quot;).play()')">è©¦è½</button>
            </div>
            <div class="example-card">
              <h4>æ’­æ”¾æ—‹å¾‹</h4>
              <div class="code-block">note("c4 e4 g4 b4")</div>
              <p>æ’­æ”¾ Cå¤§èª¿éŸ³éš</p>
              <button class="btn btn-primary" onclick="playExample('note(&quot;c4 e4 g4 b4&quot;).play()')">è©¦è½</button>
            </div>
            <div class="example-card">
              <h4>é‡è¤‡ Pattern</h4>
              <div class="code-block">s("bd*4")</div>
              <p>*4 è¡¨ç¤ºé‡è¤‡ 4 æ¬¡</p>
              <button class="btn btn-primary" onclick="playExample('s(&quot;bd*4&quot;).play()')">è©¦è½</button>
            </div>
            <div class="example-card">
              <h4>ç–ŠåŠ è²éƒ¨</h4>
              <div class="code-block">stack(s("bd*2"), s("hh*4"))</div>
              <p>åŒæ™‚æ’­æ”¾å¤šå€‹ pattern</p>
              <button class="btn btn-primary" onclick="playExample('stack(s(&quot;bd*2&quot;), s(&quot;hh*4&quot;)).play()')">è©¦è½</button>
            </div>
          </div>
        </div>

        <div id="sounds" class="tab-content">
          <h3>ğŸµ éŸ³è‰²ä»‹ç´¹</h3>
          <div class="sound-grid">
            <div class="sound-card">
              <h4>é¼“çµ„ (Drums)</h4>
              <p><strong>bd</strong> - å¤§é¼“/åº•é¼“</p>
              <p><strong>sd</strong> - å°é¼“</p>
              <p><strong>hh</strong> - è¸©éˆ¸</p>
              <p><strong>oh</strong> - é–‹æ”¾è¸©éˆ¸</p>
              <p><strong>cp</strong> - æ‹æ‰‹è²</p>
              <button class="btn btn-secondary" onclick="playExample('s(&quot;bd sd hh oh cp&quot;).play()')">è©¦è½</button>
            </div>
            <div class="sound-card">
              <h4>åˆæˆå™¨</h4>
              <p><strong>sawtooth</strong> - é‹¸é½’æ³¢</p>
              <p><strong>square</strong> - æ–¹æ³¢</p>
              <p><strong>triangle</strong> - ä¸‰è§’æ³¢</p>
              <p><strong>sine</strong> - æ­£å¼¦æ³¢</p>
              <button class="btn btn-secondary" onclick="playExample('note(&quot;c4 e4 g4&quot;).sound(&quot;sawtooth&quot;).play()')">è©¦è½</button>
            </div>
            <div class="sound-card">
              <h4>çœŸå¯¦æ¨‚å™¨</h4>
              <p><strong>piano</strong> - é‹¼ç´</p>
              <p><strong>bass</strong> - è²æ–¯</p>
              <p><strong>guitar</strong> - å‰ä»–</p>
              <p><strong>violin</strong> - å°æç´</p>
              <button class="btn btn-secondary" onclick="playExample('note(&quot;c4 e4 g4&quot;).s(&quot;piano&quot;).play()')">è©¦è½</button>
            </div>
          </div>
        </div>

        <div id="patterns" class="tab-content">
          <h3>ğŸ¨ Pattern æŠ€å·§</h3>
          <div class="example-grid">
            <div class="example-card">
              <h4>è¼ªæ›¿ Pattern</h4>
              <div class="code-block">s("&lt;bd sd&gt;")</div>
              <p>&lt;&gt; è¡¨ç¤ºè¼ªæµæ’­æ”¾</p>
              <button class="btn btn-primary" onclick="playExample('s(&quot;&lt;bd sd&gt;&quot;).play()')">è©¦è½</button>
            </div>
            <div class="example-card">
              <h4>ç¾¤çµ„ Pattern</h4>
              <div class="code-block">s("[bd sd] hh")</div>
              <p>[] è¡¨ç¤ºç¾¤çµ„ï¼Œåœ¨ä¸€æ‹å…§æ’­æ”¾</p>
              <button class="btn btn-primary" onclick="playExample('s(&quot;[bd sd] hh&quot;).play()')">è©¦è½</button>
            </div>
            <div class="example-card">
              <h4>ä¼‘æ­¢ç¬¦</h4>
              <div class="code-block">s("bd ~ sd ~")</div>
              <p>~ è¡¨ç¤ºä¼‘æ­¢ç¬¦ï¼ˆéœéŸ³ï¼‰</p>
              <button class="btn btn-primary" onclick="playExample('s(&quot;bd ~ sd ~&quot;).play()')">è©¦è½</button>
            </div>
            <div class="example-card">
              <h4>Pattern åè½‰</h4>
              <div class="code-block">s("bd sd hh").jux(rev)</div>
              <p>jux(rev) è®“ pattern åè½‰æ’­æ”¾</p>
              <button class="btn btn-primary" onclick="playExample('s(&quot;bd sd hh&quot;).jux(rev).play()')">è©¦è½</button>
            </div>
          </div>
        </div>

        <div id="effects" class="tab-content">
          <h3>âœ¨ æ•ˆæœå™¨</h3>
          <div class="example-grid">
            <div class="example-card">
              <h4>éŸ³é‡æ§åˆ¶</h4>
              <div class="code-block">.gain(0.5)</div>
              <p>èª¿æ•´éŸ³é‡ (0-1)</p>
              <button class="btn btn-primary" onclick="playExample('s(&quot;bd*4&quot;).gain(0.3).play()')">è©¦è½</button>
            </div>
            <div class="example-card">
              <h4>ç©ºé–“æ„Ÿ</h4>
              <div class="code-block">.room(0.8)</div>
              <p>å¢åŠ æ®˜éŸ¿æ•ˆæœ</p>
              <button class="btn btn-primary" onclick="playExample('s(&quot;bd sd&quot;).room(0.8).play()')">è©¦è½</button>
            </div>
            <div class="example-card">
              <h4>å»¶é²æ•ˆæœ</h4>
              <div class="code-block">.delay(0.25)</div>
              <p>å¢åŠ å›éŸ³å»¶é²</p>
              <button class="btn btn-primary" onclick="playExample('s(&quot;bd sd&quot;).delay(0.25).play()')">è©¦è½</button>
            </div>
            <div class="example-card">
              <h4>ä½é€šæ¿¾æ³¢</h4>
              <div class="code-block">.lpf(800)</div>
              <p>éæ¿¾é«˜é »ï¼Œè®“è²éŸ³æ›´æº«æš–</p>
              <button class="btn btn-primary" onclick="playExample('s(&quot;bd sd hh*4&quot;).lpf(800).play()')">è©¦è½</button>
            </div>
          </div>
        </div>
      </div>

      <!-- è‡ªè¨‚ç·¨è¼¯å™¨ -->
      <div class="section">
        <h2>ğŸ¹ è‡ªè¨‚éŸ³æ¨‚ç·¨è¼¯å™¨</h2>
        <p>åœ¨ä¸‹æ–¹ç·¨è¼¯å™¨ä¸­å¯«ä½ çš„ Strudel ç¨‹å¼ç¢¼ï¼ŒæŒ‰ä¸‹æ’­æ”¾ä¾†è½è½æ•ˆæœï¼</p>
        
        <div class="editor-area">
          <textarea id="custom-editor" placeholder="åœ¨é€™è£¡å¯«ä½ çš„ Strudel ç¨‹å¼ç¢¼...
ä¾‹å¦‚ï¼š
stack(
  s('bd*2 sd*2'),
  s('hh*8'),
  note('c4 e4 g4 b4').s('piano')
)">// è©¦è©¦çœ‹é€™å€‹ç¯„ä¾‹
stack(
  s("bd*2 sd*2"),
  s("hh*8").gain(0.4),
  note("c4 e4 g4 b4").s("piano").gain(0.6)
)</textarea>
        </div>

        <div class="controls">
          <button id="play-custom" class="btn btn-primary">â–¶ï¸ æ’­æ”¾æˆ‘çš„éŸ³æ¨‚</button>
          <button id="stop-all" class="btn btn-secondary">â¹ï¸ åœæ­¢æ’­æ”¾</button>
          <button class="btn btn-secondary" onclick="clearEditor()">ğŸ—‘ï¸ æ¸…ç©ºç·¨è¼¯å™¨</button>
        </div>
      </div>

      <!-- å…§å»ºç·¨è¼¯å™¨ -->
      <div class="section">
        <h2>ğŸ”§ é€²éšç·¨è¼¯å™¨</h2>
        <p>é€™æ˜¯å…§å»ºçš„ Strudel ç·¨è¼¯å™¨ï¼Œå…·æœ‰èªæ³•é«˜äº®åŠŸèƒ½ï¼š</p>
        <strudel-editor>
          <!--
// è©¦è©¦çœ‹ä¿®æ”¹é€™å€‹ç¯„ä¾‹
setcps(1)
stack(
  s("bd*2 sd*2"),
  s("hh*8").gain(0.4),
  note("<c4 e4 g4 b4>*2").scale('C4 minor')
  .s("sawtooth")
  .clip(sine.range(.2,.8).slow(8))
  .jux(rev)
  .room(0.5)
  .lpf(perlin.range(200,2000).slow(4))
)
-->
        </strudel-editor>
      </div>
    </div>

    <script src="https://unpkg.com/@strudel/web@1.0.3"></script>
    <script src="https://unpkg.com/@strudel/repl@latest"></script>
    <script type="module" src="./demo.js"></script>
    <script>
      // åˆå§‹åŒ– Strudel
      document.addEventListener('DOMContentLoaded', () => {
        initStrudel();
        
        // è‡ªè¨‚ç·¨è¼¯å™¨åŠŸèƒ½
        document.getElementById('play-custom').addEventListener('click', () => {
          const code = document.getElementById('custom-editor').value;
          try {
            evaluate(code);
          } catch (error) {
            alert('ç¨‹å¼ç¢¼æœ‰éŒ¯èª¤ï¼š' + error.message);
          }
        });
        
        document.getElementById('stop-all').addEventListener('click', () => {
          hush();
        });
      });
      
      // åˆ†é åˆ‡æ›
      function switchTab(tabName) {
        // éš±è—æ‰€æœ‰åˆ†é å…§å®¹
        document.querySelectorAll('.tab-content').forEach(content => {
          content.classList.remove('active');
        });
        
        // ç§»é™¤æ‰€æœ‰åˆ†é æŒ‰éˆ•çš„ active ç‹€æ…‹
        document.querySelectorAll('.tab').forEach(tab => {
          tab.classList.remove('active');
        });
        
        // é¡¯ç¤ºé¸ä¸­çš„åˆ†é å…§å®¹
        document.getElementById(tabName).classList.add('active');
        
        // è¨­ç½®é¸ä¸­çš„åˆ†é æŒ‰éˆ•ç‚º active
        event.target.classList.add('active');
      }
      
      // æ’­æ”¾ç¯„ä¾‹
      function playExample(code) {
        try {
          hush(); // å…ˆåœæ­¢ä¹‹å‰çš„éŸ³æ¨‚
          setTimeout(() => {
            evaluate(code);
          }, 100);
        } catch (error) {
          alert('æ’­æ”¾éŒ¯èª¤ï¼š' + error.message);
        }
      }
      
      // æ¸…ç©ºç·¨è¼¯å™¨
      function clearEditor() {
        document.getElementById('custom-editor').value = '';
      }
    </script>
  </body>
</html>